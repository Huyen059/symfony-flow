{% extends 'base.html.twig' %}

{% block title %}Message History{% endblock %}
{% block stylesheets %} <link rel="stylesheet" href="assets/customerStyle.css">{% endblock %}
{% block body %}
    <style>
        .example-wrapper {
            margin: 1em auto;
            max-width: 800px;
            width: 95%;
            font: 18px/1.5 sans-serif;
        }

        .example-wrapper code {
            background: #F5F5F5;
            padding: 2px 6px;
        }
    </style>
    <table class="table .table-hover">
        <tbody>
        <tr>
            <th>Id</th>
            <td>{{ ticket.id }}</td>
        </tr>
        <tr>
            <th>Title</th>
            <td>{{ ticket.title }}</td>
        </tr>
        <tr>
            <th>Content</th>
            <td>{{ ticket.content }}</td>
        </tr>
        <tr>
            <th>Status</th>
            <td>{{ ticket.status }}</td>
        </tr>
        <tr>
            <th>CreatedDate</th>
            <td>{{ ticket.createdDate ? ticket.createdDate|date('Y-m-d H:i:s') : '' }}</td>
        </tr>
        <tr>
            <th>UpdatedDate</th>
            <td>{{ ticket.updatedDate ? ticket.updatedDate|date('Y-m-d H:i:s') : '' }}</td>
        </tr>
        <tr>
            <th>IsEscalated</th>
            <td>{{ ticket.isEscalated ? 'Yes' : 'No' }}</td>
        </tr>
        <tr>
            <th>CloseReason</th>
            <td>{{ ticket.closeReason }}</td>
        </tr>
        <tr>
            <th>Priority</th>
            <td>{{ ticket.priority }}</td>
        </tr>
        </tbody>
    </table>

    <h1>Message History</h1>

    {% for comment in ticket.comments %}
        {% if not comment.isPrivate %}
            <div><h3>{{ comment.title }}</h3>
                <p>{{ comment.content }}</p></div>
        {% endif %}
    {% else %}
        <p>No Message history yet</p>
    {% endfor %}

    <div> {{ error }}</div>
    {% if ticket.status != close %}
        <div>
            {{ form_start(form) }}
            {{ form_row(form.title) }}
            {{ form_row(form.content) }}
            <button type="submit"> Add Comment</button>
            {{ form_end(form) }}
        </div>
    {% else %}
        <form method="post">
            <input type="hidden" name="reOpen" value="{{ ticket.id }}">
            <button type="submit"> Re-open Case</button>
        </form>
    {% endif %}



{% endblock %}
